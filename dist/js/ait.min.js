/*! astrox-imperium-tools v0.0.1 | (c) 2019  | MIT License | git+https://github.com/sharpshifter/ait.git */
!(function(a,t,e){function r(a){return a=a.replace(/[^\s]+/g,(function(a){return a.replace(/^./,(function(a){return a.toUpperCase()}))}))}a.showNotification=function(a,e="add_alert",r="info"){t.notify({icon:e,message:a},{type:r,timer:2e3,placement:{from:"top",align:"center"}})};var s=t("#shipdataexporter_sourcedata"),n=t("#shipdataexporter_process"),i=t("#shipdataexporter_sourcelabels"),o=t("#shipdataexporter_template"),p=t("#shipdataexporter_labelsandtemplate");t("#shipdataexporter_generateoutput");a.shipDataExporter={currentShipDataString:"",currentShipDataArray:[{}],shipInfoPattern:new RegExp(/SHIP_([^;]+);(.*)/g),init:function(){s.on("change keyup paste",(function(){s.val().length?n.removeClass("disabled"):n.addClass("disabled")}))},startProcess:function(){if(a.shipDataExporter.currentShipDataString=s.val(),a.shipDataExporter.currentShipDataString.length)if(a.shipDataExporter.shipInfoPattern.test(a.shipDataExporter.currentShipDataString)){var e;for(a.shipDataExporter.currentShipDataArray=[];null!=(e=a.shipDataExporter.shipInfoPattern.exec(a.shipDataExporter.currentShipDataString));)a.shipDataExporter.currentShipDataArray.push(e);a.shipDataExporter.currentShipDataArray.length?(a.shipDataExporter.currentShipDataArray.sort(),i.empty(),t.each(a.shipDataExporter.currentShipDataArray,(function(a,t){var e='<span class="badge badge-light" data-itemtag="'+t[1]+'">'+(function(a){var t="",e=a.replace("_lifesupport","_life_support");e=(e=e.replace("ls_","life_support_")).split("_");for(var s=0;s<e.length;s++)t+=s>0?" "+r(e[s]):r(e[s]);return t})(t[1])+"</span> ";i.append(e)})),a.showNotification("Successfully processed ship data","done","success"),p.removeClass("d-none"),t("html, body").animate({scrollTop:p.offset().top-20},350)):a.showNotification("Unable to process source ship data","error_outline","danger")}else a.showNotification("The source data doesn't seem to contain any ship stats","warning","warning")},insertTag:function(a,e){var r=t(e).data("itemtag");t(e).removeClass("badge-light").removeClass("badge-secondary").removeClass("badge-primary").removeClass("badge-success"),a.shiftKey?(o.val(o.val()+"["+r+"|*name]"),t(e).addClass("badge-success")):a.altKey?(o.val(o.val()+"["+r+"|*value]"),t(e).addClass("badge-primary")):(o.val(o.val()+"["+r+"|*name]: ["+r+"|*value]"),t(e).addClass("badge-secondary"))},generateOutput:function(){console.log("Generate Output")}},t((function(){s.length&&a.shipDataExporter.init(),i.on("click","span.badge",(function(t){a.shipDataExporter.insertTag(t,this)}))}))})(window.ait=window.ait||{},jQuery);